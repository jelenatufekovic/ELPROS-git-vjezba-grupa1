Create database HairSalon;
create table Location
(
	Id uniqueidentifier PRIMARY KEY not null,
	Name varchar (50) not null,
	Address  varchar (250) not null
);

create table Employee
(
	Id uniqueidentifier not null PRIMARY KEY,
	FirstName varchar(50) not null,
	LastName varchar(50) not null,
	DateOfEmployment smalldatetime not null,
	LocationId uniqueidentifier not null FOREIGN KEY REFERENCES Location("Id")
);
create table PersonalInfo
(
	Id uniqueidentifier not null PRIMARY KEY FOREIGN KEY REFERENCES Employee("Id"),
	Address varchar (250) null,
	Phone varchar (50) null,
	Email varchar (50) null,
	DateOfBirth smalldatetime null
);
Create Table Category
(
	Id uniqueidentifier not null PRIMARY KEY,
	Name varchar (50) not null,
	Description varchar (150) not null
);
create table HairLength
(
	Id uniqueidentifier not null PRIMARY KEY,
	Name varchar (50) not null,
	Description varchar (150) not null
);
create table Service
(
	Id uniqueidentifier not null PRIMARY KEY,
	Name varchar (150) not null,
	CategoryId uniqueidentifier not null FOREIGN KEY REFERENCES Category("Id"),
	HairLengthId uniqueidentifier not null FOREIGN KEY REFERENCES HairLength("Id"),
	Duration time not null,
	Price decimal (10,2) not null
);
create table LocationService
(
	Id uniqueidentifier not null PRIMARY KEY,
	LocationId uniqueidentifier not null FOREIGN KEY REFERENCES Location("Id"),
	ServiceId uniqueidentifier not null FOREIGN KEY REFERENCES Service("Id")
);
create table Client
(
	Id uniqueidentifier not null PRIMARY KEY,
	FirstName varchar (50) not null,
	LastName varchar (50) not null,
	Phone varchar (50) null,
	Email varchar (50) null
);
create table LocationClient
(
	Id uniqueidentifier not null PRIMARY KEY,
	LocationId uniqueidentifier not null FOREIGN KEY REFERENCES Location("Id"),
	ClientId uniqueidentifier not null FOREIGN KEY REFERENCES Client("Id")
);
create table ClientService
(
	Id uniqueidentifier not null PRIMARY KEY,
	ClinetId uniqueidentifier not null FOREIGN KEY REFERENCES Client("Id"),
	ServiceId uniqueidentifier not null FOREIGN KEY REFERENCES Service("Id")
);

--Insert

insert into Location values
(newid(), 'Osijek', 'Radićeva 28' ),
(newid(), 'Zagreb', 'Ilica 53' ),
(newid(), 'Split', 'Marka Marulića 10A' );

declare @id1 as uniqueidentifier set @id1=newid();
insert into Employee values
(@id1, 'Ivana', 'Marić', '2021-03-24 00:00', (select "Id" from "Location" where "Name"='Osijek'));
insert into PersonalInfo values
(@id1, null, null, 'imaric@mail.com', '1998-01-31 00:00');

declare @id2 as uniqueidentifier set @id2=newid();
insert into Employee values
(@id2, 'Tea', 'Sabolić', '2022-12-04 00:00', (select "Id" from "Location" where "Name"='Zagreb'));
insert into PersonalInfo values
(@id2, null, 099734864, 'tsabolic99@mail.com', '');

declare @id3 as uniqueidentifier set @id3=newid();
insert into Employee values
(@id3, 'Toni', 'Vuković', '2021-08-20 00:00', (select "Id" from "Location" where "Name"='Split'));
insert into PersonalInfo values
(@id3, 'Trg Ante Starčevića 6', null, 'tvukovic89@mail.com', '1989-11-09 00:00');

Insert into Category values
(newid(), 'HairCut', 'Haircut'),
(newid(), 'Coloring', 'Color and highlights'),
(newid(), 'Washing', 'Washing'),
(newid(), 'Barber', 'Beard grooming'),
(newid(), 'Treatment', 'Hair treatments'),
(newid(), 'Styling', 'Hair styling');

insert into HairLength values 
(newid(), 'Short', 'Chin Length'),
(newid(), 'Medium', 'Above Shoulders'),
(newid(), 'Long', 'Past the Shoulders');
